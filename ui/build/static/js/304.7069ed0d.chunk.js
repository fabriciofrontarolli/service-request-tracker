"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[304],{5936:function(e,n,t){var r=t(9439),a=t(613),o=t(1070),c={fetch:function(e,n,t){var o="?page=".concat(e,"&limit=").concat(n);t&&(o=Object.entries(t).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],o=t[1],c=encodeURIComponent(o.replace(/ /g,"%20"));return"".concat(e,"&").concat(a,"=").concat(c)}),o));return a.Z.get("/clientes".concat(o))},get:function(e){if(e)return a.Z.get("/clientes/".concat(e))},criar:function(e){return(0,o.Z)(e),(0,a.Z)({url:"/clientes",method:"post",data:e})},salvar:function(e,n){return(0,o.Z)(n),(0,a.Z)({url:"/clientes/".concat(e),method:"put",data:n})}};n.Z=c},4206:function(e,n,t){var r=t(9439),a=t(613),o=t(1070),c={fetch:function(e,n,t){var o="?page=".concat(e,"&limit=").concat(n);t&&(o=Object.entries(t).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],o=t[1],c=encodeURIComponent(o.replace(/ /g,"%20"));return"".concat(e,"&").concat(a,"=").concat(c)}),o));return a.Z.get("/usuarios".concat(o))},get:function(e){if(e)return a.Z.get("/usuarios/".concat(e))},buscarTecnicos:function(){return a.Z.get("/usuarios/tecnicos")},criar:function(e){return(0,o.Z)(e),(0,a.Z)({url:"/usuarios",method:"post",data:e})},salvar:function(e,n){return(0,o.Z)(n),(0,a.Z)({url:"/usuarios/".concat(e),method:"put",data:n})},ativar:function(e){return(0,a.Z)({url:"/usuarios/".concat(e,"/ativar"),method:"put"})},desativar:function(e){return(0,a.Z)({url:"/usuarios/".concat(e,"/desativar"),method:"put"})}};n.Z=c},1070:function(e,n,t){t.d(n,{Z:function(){return r}});var r=function(e){Object.keys(e).forEach((function(n){null!==e[n]&&void 0!==e[n]&&""!==e[n]||delete e[n]}))}},7095:function(e,n,t){t.d(n,{$8:function(){return f},CR:function(){return r},K1:function(){return d},KE:function(){return u},QR:function(){return s},VP:function(){return o},Yi:function(){return c},an:function(){return l},dA:function(){return a},rj:function(){return i}});var r={id:"deddf150-e3a0-4a09-8b54-671df2ba6824",description:"Triagem"},a={id:"cbe8b932-90ca-4a5b-84e4-3aa91571a0cb",description:"Aberto"},o={id:"5c1795fd-8856-4c44-85fd-f1488cb5489b",description:"Em Atendimento"},c={id:"1cdf403c-9da1-4a8e-b2fc-3e356d9815ff",description:"Fechado"},i={id:"administrador",description:"Administrador"},s={id:"tecnico",description:"Tecnico"},u={id:"cliente",description:"Cliente"},l=[i,s,u],d=[r,a,o,c,{id:"4a48df79-a466-4bd0-83b9-3c94b2b76d7f",description:"Cobran\xe7a"},{id:"1050ced4-0599-456d-a614-932ab25aed99",description:"Arquivado"}],f=[{id:"f6d1944a-7569-4668-bae6-c6fe4f36eb29",description:"Laborat\xf3rio"},{id:"9957342c-815e-47b4-8d16-62fe4432ee59",description:"Campo"}]},304:function(e,n,t){t.r(n),t.d(n,{Register:function(){return F}});var r=t(5671),a=t(3144),o=t(136),c=t(9388),i=t(1413),s=t(4165),u=t(5861),l=t(9439),d=t(2791),f=t(3734),p=t(1095),m=t(3085),v=t(940),Z=t(7528),b=t(3707),h=t(6673),x=t(5936),g=t(7689),j=t(1087),C=t(6864),y=t(7095),k=t(4206),w=t(184),E=f.Z.Option,O={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16}}},P={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},I=function(){var e=p.Z.useForm(),n=(0,l.Z)(e,1)[0],t=(0,g.s0)(),r=(0,g.UO)(),a=(0,d.useState)(void 0),o=(0,l.Z)(a,2),c=o[0],h=o[1],j=(0,d.useState)([]),C=(0,l.Z)(j,2),I=(C[0],C[1]),F=(0,d.useState)([]),S=(0,l.Z)(F,2),N=S[0],R=S[1],_=(0,d.useState)(!1),A=(0,l.Z)(_,2),U=A[0],T=A[1],V=(0,d.useState)(!1),q=(0,l.Z)(V,2),K=q[0],L=q[1],$=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.fetch(1,1e4);case 3:n=e.sent,t=n.data.map((function(e){return{value:e.id,label:e.nome_fantasia}})),I(n.data),R(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m.Z.error("Erro ao buscar cliente ".concat(e.t0)),console.log("erro >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var a,o,c,i,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r&&r.id,e.prev=1,!a){e.next=8;break}return e.next=5,k.Z.get(a);case 5:o=e.sent,(c=o.data)&&(i=Object.keys(c).map((function(e){return{name:e,value:c[e]}})),u=i.filter((function(e){return"id"!==e.name.toLowerCase()&&"created_at"!==e.name.toLowerCase()})),n.setFields(u),h(c));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t("/app/administrativo/usuarios"),m.Z.error("Erro ao buscar o Usuario! ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete n["password-repeat"],n.is_admin=n.perfil===y.rj.id,n.is_tecnico=n.perfil===y.QR.id,n.is_cliente=n.perfil===y.KE.id,e.prev=4,!c){e.next=10;break}return e.next=8,k.Z.salvar(c.id,n);case 8:e.next=12;break;case 10:return e.next=12,k.Z.criar(n);case 12:r="Usuario ".concat(c?"atualizado":"criado"),m.Z.success({message:r}),t("/app/administrativo/usuarios"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),m.Z.error({message:e.t0});case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){$()}),[]),(0,d.useEffect)((function(){N.length&&Q()}),[N]),(0,w.jsxs)(p.Z,(0,i.Z)((0,i.Z)({},O),{},{form:n,name:"register",onFinish:Y,scrollToFirstError:!0,children:[(0,w.jsx)(p.Z.Item,{name:"nome",label:"Nome",rules:[{required:!0,message:"Por favor informe o nome"},{max:130,message:"Nome deve conter no maximo 130 carateres"}],children:(0,w.jsx)(v.Z,{autoComplete:"off"})}),(0,w.jsx)(p.Z.Item,{name:"email",label:"Email",rules:[{max:130,message:"Email deve conter no maximo 130 caracteres"}],children:(0,w.jsx)(v.Z,{autoComplete:"off"})}),(0,w.jsx)(p.Z.Item,{name:"perfil",label:"Perfil",children:(0,w.jsx)(f.Z,{onChange:function(){var e=!1;n.getFieldValue("perfil")===y.KE.id&&(e=!0),e||n.setFieldValue("id_cliente",void 0),T(e)},children:y.an.map((function(e){return(0,w.jsx)(E,{value:e.id,children:e.description},e.id)}))})}),U&&(0,w.jsx)(p.Z.Item,{name:"id_cliente",label:"Cliente",children:(0,w.jsx)(f.Z,{value:"",onChange:function(){},children:N.map((function(e){return(0,w.jsx)(E,{value:e.value,children:e.label},e.value)}))})}),(0,w.jsx)(p.Z.Item,{name:"password",label:"Senha",onChange:function(){var e=n.getFieldValue("password");L(!!e)},rules:[{required:!c,message:"Por favor insira a senha!"}],hasFeedback:!0,children:(0,w.jsx)(v.Z.Password,{})}),(0,w.jsx)(p.Z.Item,{name:"password-repeat",label:"Confirme a Senha",dependencies:["password"],hasFeedback:!0,rules:[{required:!c,message:"Por favor confirme a senha!"},function(e){var n=e.getFieldValue;return{validator:function(e,t){return t&&n("password")!==t?Promise.reject(new Error("As senhas devem ser iguais")):Promise.resolve()}}}],children:(0,w.jsx)(v.Z.Password,{})}),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[c&&K&&(0,w.jsxs)(Z.Z,{color:"volcano",style:{textAlign:"center",marginBottom:"2rem"},children:["Atencao: O usuario sera salvo com uma nova senha. ",(0,w.jsx)("br",{})," o usuario devera ser notificado!"]}),(0,w.jsx)(b.Z,{type:"primary",htmlType:"submit",children:"Salvar"})]}),(0,w.jsx)(p.Z.Item,(0,i.Z)({},P))]}))},F=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(j.rU,{to:"/app/administrativo/usuarios",style:{cursor:"pointer"},children:[(0,w.jsx)(C.Z,{})," Retornar"]}),(0,w.jsx)(h.Z,{title:"Novo Usuario",children:(0,w.jsx)(I,{})})]})}}]),t}(d.Component);n.default=F},7528:function(e,n,t){t.d(n,{Z:function(){return j}});var r=t(4942),a=t(7462),o=t(9439),c=t(732),i=t(1694),s=t.n(i),u=t(1818),l=t(2791),d=t(1929),f=t(4466),p=t(2833),m=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},v=function(e){var n,t=e.prefixCls,o=e.className,c=e.checked,i=e.onChange,u=e.onClick,f=m(e,["prefixCls","className","checked","onChange","onClick"]),p=(0,l.useContext(d.E_).getPrefixCls)("tag",t),v=s()(p,(n={},(0,r.Z)(n,"".concat(p,"-checkable"),!0),(0,r.Z)(n,"".concat(p,"-checkable-checked"),c),n),o);return l.createElement("span",(0,a.Z)({},f,{className:v,onClick:function(e){null===i||void 0===i||i(!c),null===u||void 0===u||u(e)}}))},Z=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},b=new RegExp("^(".concat(f.Y.join("|"),")(-inverse)?$")),h=new RegExp("^(".concat(f.E.join("|"),")$")),x=function(e,n){var t,i=e.prefixCls,f=e.className,m=e.style,v=e.children,x=e.icon,g=e.color,j=e.onClose,C=e.closeIcon,y=e.closable,k=void 0!==y&&y,w=Z(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),E=l.useContext(d.E_),O=E.getPrefixCls,P=E.direction,I=l.useState(!0),F=(0,o.Z)(I,2),S=F[0],N=F[1];l.useEffect((function(){"visible"in w&&N(w.visible)}),[w.visible]);var R=function(){return!!g&&(b.test(g)||h.test(g))},_=(0,a.Z)({backgroundColor:g&&!R()?g:void 0},m),A=R(),U=O("tag",i),T=s()(U,(t={},(0,r.Z)(t,"".concat(U,"-").concat(g),A),(0,r.Z)(t,"".concat(U,"-has-color"),g&&!A),(0,r.Z)(t,"".concat(U,"-hidden"),!S),(0,r.Z)(t,"".concat(U,"-rtl"),"rtl"===P),t),f),V=function(e){e.stopPropagation(),null===j||void 0===j||j(e),e.defaultPrevented||"visible"in w||N(!1)},q="onClick"in w||v&&"a"===v.type,K=(0,u.Z)(w,["visible"]),L=x||null,$=L?l.createElement(l.Fragment,null,L,l.createElement("span",null,v)):v,Q=l.createElement("span",(0,a.Z)({},K,{ref:n,className:T,style:_}),$,k?C?l.createElement("span",{className:"".concat(U,"-close-icon"),onClick:V},C):l.createElement(c.Z,{className:"".concat(U,"-close-icon"),onClick:V}):null);return q?l.createElement(p.Z,null,Q):Q},g=l.forwardRef(x);g.CheckableTag=v;var j=g}}]);
//# sourceMappingURL=304.7069ed0d.chunk.js.map