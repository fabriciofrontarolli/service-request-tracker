"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[986],{8470:function(e,t,n){n(2791);var r=n(184),i=function(e){var t=e.children,n=e.className,i=e.alignItems,a=e.justifyContent,o=e.mobileFlex,c=e.flexDirection,u=e.style;return(0,r.jsx)("div",{className:"".concat(o?"d-flex":"d-md-flex","\n\t\t\t\t").concat(n,"\n\t\t\t\t").concat(c?"flex-"+c:"","\n\t\t\t\t").concat(i?"align-items-"+i:"","\n\t\t\t\t").concat(a?"justify-content-"+a:""),style:u||{},children:t})};i.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},t.Z=i},8429:function(e,t,n){var r=n(9439),i=n(613),a=n(1070),o={fetch:function(e,t,n){var a="?page=".concat(e,"&limit=").concat(t);n&&(a=Object.entries(n).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0],a=n[1],o=encodeURIComponent(a.replace(/ /g,"%20"));return"".concat(e,"&").concat(i,"=").concat(o)}),a));return i.Z.get("/ordens-de-servico".concat(a))},get:function(e){if(e)return i.Z.get("/ordens-de-servico/".concat(e))},quadroLaboratorio:function(){return i.Z.get("/ordens-de-servico/quadro-laboratorio")},quadroCampo:function(){return i.Z.get("/ordens-de-servico/quadro-campo")},criar:function(e){return(0,a.Z)(e),(0,i.Z)({url:"/ordens-de-servico",method:"post",data:e})},salvar:function(e,t){return(0,a.Z)(t),(0,i.Z)({url:"/ordens-de-servico/".concat(e),method:"put",data:t})}};t.Z=o},1070:function(e,t,n){n.d(t,{Z:function(){return r}});var r=function(e){Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&""!==e[t]||delete e[t]}))}},2703:function(e,t,n){var r=n(5671),i=n(3144),a=function(){function e(){(0,r.Z)(this,e)}return(0,i.Z)(e,null,[{key:"getNameInitial",value:function(e){var t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}},{key:"getRouteInfo",value:function(e,t){if(e.path===t)return e;var n;for(var r in e)if(e.hasOwnProperty(r)&&"object"===typeof e[r]&&(n=this.getRouteInfo(e[r],t)))return n;return n}},{key:"getColorContrast",value:function(e){if(!e)return"dark";var t=parseInt(i(e).substring(0,2),16),n=function(e){return parseInt(i(e).substring(2,4),16)}(e),r=function(e){return parseInt(i(e).substring(4,6),16)}(e);function i(e){return"#"===e.charAt(0)?e.substring(1,7):e}return(299*t+587*n+114*r)/1e3>130?"dark":"light"}},{key:"shadeColor",value:function(e,t){var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);n=parseInt(n*(100+t)/100),r=(r=parseInt(r*(100+t)/100))<255?r:255,i=(i=parseInt(i*(100+t)/100))<255?i:255;var a=1===(n=n<255?n:255).toString(16).length?"0".concat(n.toString(16)):n.toString(16),o=1===r.toString(16).length?"0".concat(r.toString(16)):r.toString(16),c=1===i.toString(16).length?"0".concat(i.toString(16)):i.toString(16);return"#".concat(a).concat(o).concat(c)}},{key:"rgbaToHex",value:function(e){var t=function(e){return e.replace(/^\s+|\s+$/gm,"")},n=e.substring(e.indexOf("(")).split(","),r=parseInt(t(n[0].substring(1)),10),i=parseInt(t(n[1]),10),a=parseInt(t(n[2]),10),o=parseFloat(t(n[3].substring(0,n[3].length-1))).toFixed(2),c=[r.toString(16),i.toString(16),a.toString(16),Math.round(255*o).toString(16).substring(0,2)];return c.forEach((function(e,t){1===e.length&&(c[t]="0"+e)})),"#".concat(c.join(""))}},{key:"getSignNum",value:function(e,t,n){return e>0?t:e<0?n:null}},{key:"antdTableSorter",value:function(e,t,n){return"number"===typeof e[n]&&"number"===typeof t[n]?e[n]-t[n]:"string"===typeof e[n]&&"string"===typeof t[n]?(e=e[n].toLowerCase())>(t=t[n].toLowerCase())?-1:t>e?1:0:void 0}},{key:"filterArray",value:function(e,t,n){var r=e;return e&&(r=e.filter((function(e){return e[t]===n}))),r}},{key:"deleteArrayRow",value:function(e,t,n){var r=e;return e&&(r=e.filter((function(e){return e[t]!==n}))),r}},{key:"wildCardSearch",value:function(e,t){return e=e.filter((function(e){return function(e){for(var n in e)if(null!=e[n]&&-1!==e[n].toString().toUpperCase().indexOf(t.toString().toUpperCase()))return!0}(e)}))}},{key:"getBreakPoint",value:function(e){var t=[];for(var n in e){if(e.hasOwnProperty(n))e[n]&&t.push(n)}return t}}]),e}();t.Z=a},7095:function(e,t,n){n.d(t,{$8:function(){return f},CR:function(){return r},K1:function(){return d},KE:function(){return s},QR:function(){return u},VP:function(){return a},Yi:function(){return o},an:function(){return l},dA:function(){return i},rj:function(){return c}});var r={id:"deddf150-e3a0-4a09-8b54-671df2ba6824",description:"Triagem"},i={id:"cbe8b932-90ca-4a5b-84e4-3aa91571a0cb",description:"Aberto"},a={id:"5c1795fd-8856-4c44-85fd-f1488cb5489b",description:"Em Atendimento"},o={id:"1cdf403c-9da1-4a8e-b2fc-3e356d9815ff",description:"Fechado"},c={id:"administrador",description:"Administrador"},u={id:"tecnico",description:"Tecnico"},s={id:"cliente",description:"Cliente"},l=[c,u,s],d=[r,i,a,o,{id:"4a48df79-a466-4bd0-83b9-3c94b2b76d7f",description:"Cobran\xe7a"},{id:"1050ced4-0599-456d-a614-932ab25aed99",description:"Arquivado"}],f=[{id:"f6d1944a-7569-4668-bae6-c6fe4f36eb29",description:"Laborat\xf3rio"},{id:"9957342c-815e-47b4-8d16-62fe4432ee59",description:"Campo"}]},986:function(e,t,n){n.r(t),n.d(t,{OrdenDeServico:function(){return I}});var r=n(4165),i=n(5861),a=n(4942),o=n(1413),c=n(9439),u=n(2791),s=n(3734),l=n(7528),d=n(6673),f=n(940),p=n(7123),m=n(3707),g=n(4415),h=n(9221),v=n(7689),x=n(1087),b=(n(2426),n(8429)),y=n(2703),Z=n(8470),w=n(7095),j=n(184),S=s.Z.Option,C=[{title:"OS",dataIndex:"numero"},{title:"Cliente",dataIndex:"cliente"},{title:"Descricao",dataIndex:"descricao",render:function(e,t){return(0,j.jsx)("span",{style:{width:"30rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:t.descricao})}},{title:"Data",dataIndex:"data",render:function(e,t){return(0,j.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block"},children:new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(t.data))})}},{title:"Tecnico",dataIndex:"nome"},{title:"Status",dataIndex:"status",render:function(e,t){return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.Z,{color:(n=t.status,"Triagem"===n?"red":"Aberto"===n?"yellow":"Em Atendimento"===n?"blue":"Cobran\xe7a"===n?"purple":"Fechado"===n?"green":""),children:t.status})});var n},sorter:function(e,t){return y.Z.antdTableSorter(e,t,"status")}},{title:"Tipo",dataIndex:"tipo"}],I=function(){var e=(0,u.useState)([]),t=(0,c.Z)(e,2),n=t[0],l=t[1],y=(0,u.useState)({page:1,limit:10,totalPages:1}),I=(0,c.Z)(y,2),k=I[0],_=I[1],T=(0,u.useState)({os:"",tipo:"",status:"",cliente:"",data_inicio:"",data_fim:"",data_inicio_raw:"",data_fim_raw:""}),D=(0,c.Z)(T,2),O=D[0],R=D[1],F=(0,v.s0)(),A=function(e,t){var n=t&&t.target.value,r=(0,o.Z)((0,o.Z)({},O),{},(0,a.Z)({},e,n));"data_inicio_raw"===e&&(r=(0,o.Z)((0,o.Z)({},r),{},{data_inicio:n&&n.startOf("day").format().toString()})),"data_fim_raw"===e&&(r=(0,o.Z)((0,o.Z)({},r),{},{data_fim:n&&n.endOf("day").format().toString()})),R(r)},P=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,a,o,u=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:k.page,n=u.length>1&&void 0!==u[1]?u[1]:k.limit,e.prev=2,i=Object.fromEntries(Object.entries(O).filter((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return!n.includes("raw")&&!!r}))),e.next=6,b.Z.fetch(t,n,i);case 6:a=e.sent,o=a.data.map((function(e){return{id:e.id,numero:e.numero,cliente:e.nome_fantasia,descricao:e.descricao,data:e.created_at,nome:e.nome,status:e.status_ordem_servico,tipo:e.tipo_ordem_servico}})),l(o),_(a.pagination),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log("err >> ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){P()}),[]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(d.Z,{title:"Ordens de Servico",children:[(0,j.jsx)(d.Z,{children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,j.jsxs)(Z.Z,{flexDirection:"row",style:{display:"flex",flexWrap:"wrap",marginBottom:"1rem"},children:[(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"OS"}),(0,j.jsx)(f.Z,{value:O.nome,allowClear:!0,onChange:function(e){return A("os",e)},style:{width:"18rem",marginTop:"0.5rem",marginRight:"1rem"}})]}),(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"Tipo"}),(0,j.jsx)(s.Z,{value:O.tipo,onChange:function(e){return A("tipo",{target:{value:e}})},showSearch:!0,allowClear:!0,optionFilterProp:"children",style:{width:"15rem",marginTop:"0.5rem",marginRight:"1rem"},children:w.$8.map((function(e){return(0,j.jsx)(S,{value:e.id,children:e.description},e.id)}))})]}),(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"Status"}),(0,j.jsx)(s.Z,{value:O.status,onChange:function(e){return A("status",{target:{value:e}})},showSearch:!0,allowClear:!0,optionFilterProp:"children",style:{width:"15rem",marginTop:"0.5rem",marginRight:"1rem"},children:w.K1.map((function(e){return(0,j.jsx)(S,{value:e.id,children:e.description},e.id)}))})]}),(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"Cliente"}),(0,j.jsx)(f.Z,{value:O.cliente,allowClear:!0,onChange:function(e){return A("cliente",e)},style:{width:"18rem",marginTop:"0.5rem",marginRight:"1rem"}})]}),(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"Data Inicio"}),(0,j.jsx)(p.Z,{value:O.data_inicio_raw,onChange:function(e){return A("data_inicio_raw",{target:{value:e}})},placeholder:"",style:{width:"15rem",marginTop:"0.5rem",marginRight:"1rem"}})]}),(0,j.jsxs)(Z.Z,{flexDirection:"column",children:[(0,j.jsx)("label",{children:"Data Fim"}),(0,j.jsx)(p.Z,{value:O.data_fim_raw,onChange:function(e){return A("data_fim_raw",{target:{value:e}})},placeholder:"",style:{width:"15rem",marginTop:"0.5rem",marginRight:"1rem"}})]})]}),(0,j.jsx)(m.Z,{type:"primary",style:{minWidth:"10rem",alignSelf:"flex-end"},onClick:function(){return P()},children:"Buscar"})]})}),(0,j.jsx)(x.rU,{to:"/app/dashboards/abrir-chamado?previous=app/dashboards/ordens-de-servico",children:(0,j.jsx)(m.Z,{type:"primary",children:"Abrir Chamado"})}),(0,j.jsx)(g.Z,{pagination:!1,columns:C,dataSource:n,rowKey:"id",style:{cursor:"pointer",marginTop:"2rem"},onRow:function(e,t){return{onClick:function(t){F("/app/dashboards/editar-ordem-de-servico/".concat(e.id))}}}}),(0,j.jsx)(h.Z,{defaultCurrent:parseInt(k.page),current:parseInt(k.page),pageSize:k.limit,total:k.total,style:{marginTop:"2.5rem",marginBottom:"2.5rem"},onChange:function(e,t){P(e,t)},size:"default",showSizeChanger:!0,showQuickJumper:!0})]})})};t.default=I}}]);
//# sourceMappingURL=986.6ec52a5d.chunk.js.map