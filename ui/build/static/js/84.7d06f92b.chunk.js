"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[84],{5936:function(e,n,t){var r=t(9439),a=t(613),i=t(1070),s={fetch:function(e,n,t){var i="?page=".concat(e,"&limit=").concat(n);t&&(i=Object.entries(t).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],i=t[1],s=encodeURIComponent(i.replace(/ /g,"%20"));return"".concat(e,"&").concat(a,"=").concat(s)}),i));return a.Z.get("/clientes".concat(i))},get:function(e){if(e)return a.Z.get("/clientes/".concat(e))},criar:function(e){return(0,i.Z)(e),(0,a.Z)({url:"/clientes",method:"post",data:e})},salvar:function(e,n){return(0,i.Z)(n),(0,a.Z)({url:"/clientes/".concat(e),method:"put",data:n})}};n.Z=s},8429:function(e,n,t){var r=t(9439),a=t(613),i=t(1070),s={fetch:function(e,n,t){var i="?page=".concat(e,"&limit=").concat(n);t&&(i=Object.entries(t).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],i=t[1],s=encodeURIComponent(i.replace(/ /g,"%20"));return"".concat(e,"&").concat(a,"=").concat(s)}),i));return a.Z.get("/ordens-de-servico".concat(i))},get:function(e){if(e)return a.Z.get("/ordens-de-servico/".concat(e))},quadroLaboratorio:function(){return a.Z.get("/ordens-de-servico/quadro-laboratorio")},quadroCampo:function(){return a.Z.get("/ordens-de-servico/quadro-campo")},criar:function(e){return(0,i.Z)(e),(0,a.Z)({url:"/ordens-de-servico",method:"post",data:e})},salvar:function(e,n){return(0,i.Z)(n),(0,a.Z)({url:"/ordens-de-servico/".concat(e),method:"put",data:n})}};n.Z=s},4206:function(e,n,t){var r=t(9439),a=t(613),i=t(1070),s={fetch:function(e,n,t){var i="?page=".concat(e,"&limit=").concat(n);t&&(i=Object.entries(t).reduce((function(e,n){var t=(0,r.Z)(n,2),a=t[0],i=t[1],s=encodeURIComponent(i.replace(/ /g,"%20"));return"".concat(e,"&").concat(a,"=").concat(s)}),i));return a.Z.get("/usuarios".concat(i))},get:function(e){if(e)return a.Z.get("/usuarios/".concat(e))},buscarTecnicos:function(){return a.Z.get("/usuarios/tecnicos")},criar:function(e){return(0,i.Z)(e),(0,a.Z)({url:"/usuarios",method:"post",data:e})},salvar:function(e,n){return(0,i.Z)(n),(0,a.Z)({url:"/usuarios/".concat(e),method:"put",data:n})},ativar:function(e){return(0,a.Z)({url:"/usuarios/".concat(e,"/ativar"),method:"put"})},desativar:function(e){return(0,a.Z)({url:"/usuarios/".concat(e,"/desativar"),method:"put"})}};n.Z=s},1070:function(e,n,t){t.d(n,{Z:function(){return r}});var r=function(e){Object.keys(e).forEach((function(n){null!==e[n]&&void 0!==e[n]&&""!==e[n]||delete e[n]}))}},6599:function(e,n,t){t.r(n),t.d(n,{Register:function(){return Y},default:function(){return H}});var r=t(5671),a=t(3144),i=t(136),s=t(9388),c=t(1413),o=t(4165),l=t(5861),d=t(9439),u=t(2791),m=t(940),f=t(7123),p=t(3734),h=t(1095),x=t(3085),j=t(6673),v=t(3373),b=t(6106),g=t(3707),Z=t(7689),y=t(8803),S=t(7071),w=t(2426),_=t.n(w),C=t(5936),k=t(8429),N=t(1087),I=t(7095),R=t(1276),A=t.n(R),T="abrir-chamado_signaturePad__LxvjR",D=t(4206),O=t(1146),E=t.n(O),L=t(184),P=function(e){var n=e.ordemDeServico,t=e.togglePrintView,r=(0,u.useRef)();return(0,L.jsxs)("div",{className:"container",children:[(0,L.jsx)(N.rU,{style:{fontSize:"1.6rem",marginBottom:"2rem"},onClick:t,children:"Voltar para OS"}),(0,L.jsxs)(j.Z,{style:{marginTop:"1.5rem"},children:[(0,L.jsxs)(j.Z,{ref:r,children:[(0,L.jsxs)("div",{className:"d-md-flex justify-content-md-between",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,L.jsxs)("div",{className:"text-left",children:[(0,L.jsx)("img",{src:"/img/sathi-logo.png",alt:"",style:{marginBottom:"1rem"}}),(0,L.jsx)("address",{children:(0,L.jsxs)("p",{children:[(0,L.jsx)("span",{className:"font-weight-semibold text-dark font-size-md",children:"Sathi Informatica"}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"00.439.616.0001-63"}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"Rua Frei Manoel da Ressureicao, 339"}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"Guanabara"}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"Campinas/SP"}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"13073-027"}),(0,L.jsx)("br",{}),(0,L.jsx)("abbr",{className:"text-dark",title:"Phone",children:"Telefone:"}),(0,L.jsx)("span",{children:"(19) 3705-1414"})]})})]}),(0,L.jsxs)("div",{className:"text-right",children:[(0,L.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:["OS: ",n.numero]}),(0,L.jsx)("h5",{className:"mb-1 font-weight-semibold",children:n.tipo_ordem_servico}),(0,L.jsx)("p",{children:new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(n.created_at))}),(0,L.jsx)("br",{}),(0,L.jsx)("address",{children:(0,L.jsxs)("p",{children:[(0,L.jsx)("span",{className:"font-weight-semibold text-dark font-size-md",children:n.nome_fantasia}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:n.cliente_endereco}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:n.cliente_cidade_estado}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"".concat(n.cliente_bairro," ").concat(n.cliente_cep," ")}),(0,L.jsx)("br",{})]})})]})]}),(0,L.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"2rem",marginBottom:"3rem",paddingBottom:"2rem",borderBottom:"1px solid #D8E2E7"},children:[(0,L.jsxs)("div",{children:[(0,L.jsx)("h5",{children:"ABERTURA"}),(0,L.jsx)("span",{children:"10/10/2023"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("h5",{children:"CHEGADA"}),(0,L.jsx)("span",{children:"10/10/2023 - 10:25s"})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)("h5",{children:"SAIDA"}),(0,L.jsx)("span",{children:"10/10/2023 - 14:35"})]})]}),(0,L.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,L.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"PROBLEMA"}),(0,L.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.descricao})]}),(0,L.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,L.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"SOLUCAO"}),(0,L.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.solucao})]}),(0,L.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,L.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"PENDENCIA"}),(0,L.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.consumo})]}),(0,L.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,L.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"OBSERVACOES"}),(0,L.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.observacao})]}),(0,L.jsx)("div",{className:"mt-2",children:(0,L.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,L.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"300",letterSpacing:"0.3rem",marginTop:"2rem"},children:"ASSINATURA"}),(0,L.jsx)("div",{className:"text-right ",children:(0,L.jsx)("div",{className:"border-bottom",children:(0,L.jsx)("p",{className:"mb-2",children:(0,L.jsx)("img",{src:"".concat(n.assinatura),style:{width:"40rem"}})})})})]})})]}),(0,L.jsx)("hr",{className:"d-print-none"}),(0,L.jsx)("div",{className:"text-right d-print-none",children:(0,L.jsx)(E(),{trigger:function(){return(0,L.jsxs)(g.Z,{type:"primary",children:[(0,L.jsx)(y.Z,{type:"printer"}),(0,L.jsx)("span",{className:"ml-1",children:"Imprimir"})]})},content:function(){return r.current}})})]})]})},F=t(6864),B=t(7019),U=m.Z.TextArea,z=f.Z.RangePicker,q=p.Z.Option,V={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16}}},W=function(){var e=h.Z.useForm(),n=(0,d.Z)(e,1)[0],t=(0,Z.s0)(),r=(0,Z.TH)(),a=(0,u.useRef)(),i=(0,Z.UO)(),s=(0,u.useState)(void 0),f=(0,d.Z)(s,2),w=f[0],R=f[1],O=(0,u.useState)([]),E=(0,d.Z)(O,2),W=E[0],Y=E[1],H=(0,u.useState)([]),K=(0,d.Z)(H,2),M=K[0],G=K[1],$=(0,u.useState)([]),J=(0,d.Z)($,2),Q=J[0],X=J[1],ee=(0,u.useState)(!1),ne=(0,d.Z)(ee,2),te=ne[0],re=ne[1],ae=(0,u.useState)(!1),ie=(0,d.Z)(ae,2),se=ie[0],ce=ie[1],oe=(0,u.useState)(!1),le=(0,d.Z)(oe,2),de=le[0],ue=le[1],me=(0,u.useState)(!1),fe=(0,d.Z)(me,2),pe=fe[0],he=fe[1],xe=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.Z.fetch(1,1e4);case 3:n=e.sent,t=n.data.map((function(e){return{value:e.id,label:"".concat(e.nome_fantasia," (").concat(e.contrato?"Contrato":"Eventual",")")}})),Y(t),G(n.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("err >> ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.Z.buscarTecnicos();case 3:n=e.sent,t=n.data.map((function(e){return{value:e.id,label:e.nome}})),X(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err >> ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var r,s,c,l,d,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i&&i.id,e.prev=1,!r){e.next=10;break}return e.next=5,k.Z.get(r);case 5:s=e.sent,(c=s.data)&&(l=Object.keys(c).map((function(e){return{name:e,value:c[e]}})),d=l.filter((function(e){return"id"!==e.name.toLowerCase()&&"created_at"!==e.name.toLowerCase()&&"data_inicio_atendimento"!==e.name.toLowerCase()&&"data_fim_atendimento"!==e.name.toLowerCase()})),c.data_inicio_atendimento&&c.data_fim_atendimento&&d.push({name:"data",value:[_()(c.data_inicio_atendimento),_()(c.data_fim_atendimento)]}),n.setFields(d),R(c),c.assinatura&&a.current.fromDataURL(c.assinatura)),u=n.getFieldValue("cliente_id"),be(u);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t("/app/dashboards/ordens-de-servico"),x.Z.error("Erro ao buscar o Ordem De Servico! ".concat(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),be=function(e){if(e){var n=M.find((function(n){return n.id==e}));ce(n)}},ge=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n){var r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data?n.data[0].toISOString():void 0,a=n.data?n.data[1].toISOString():void 0,pe&&(n.cliente_id=Ze().cliente,n.status_ordem_servico_id=I.CR.id),n.data_inicio_atendimento=r,n.data_fim_atendimento=a,n.data=void 0,e.prev=6,!w){e.next=12;break}return e.next=10,k.Z.salvar(w.id,n);case 10:e.next=14;break;case 12:return e.next=14,k.Z.criar(n);case 14:i="Ordem de Servico ".concat(w?"atualizado":"criado"),x.Z.success({message:i}),t("/app/dashboards/ordens-de-servico"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),x.Z.error({message:e.t0});case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(n){return e.apply(this,arguments)}}(),Ze=function(){var e=localStorage.getItem(B.Y)||null;if(e)return JSON.parse(e)};return(0,u.useEffect)((function(){xe(),je(),function(){var e=new URLSearchParams(r.search).get("previous");ue(e)}(),function(){var e=Ze();he(e&&e.perfil===I.KE.id)}()}),[]),(0,u.useEffect)((function(){W.length&&ve()}),[W]),te?(0,L.jsx)(P,{ordemDeServico:w,togglePrintView:function(){return re(!1)}}):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(N.rU,{to:de||"/app/dashboards/ordens-de-servico",style:{cursor:"pointer"},children:[(0,L.jsx)(F.Z,{})," Retornar"]}),(0,L.jsxs)(j.Z,{title:w?"Ordem de Servi\xe7o":"Abrir Chamado",children:[w&&w.created_at&&(0,L.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"83%",textAlign:"center",marginBottom:"1.5rem"},children:(0,L.jsx)(v.Z,{title:"Data do chamado",style:{fontSize:"0.2rem"},value:new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(w.created_at))})}),(0,L.jsxs)(h.Z,(0,c.Z)((0,c.Z)({},V),{},{form:n,name:"register",onFinish:ge,scrollToFirstError:!0,children:[(0,L.jsx)(h.Z.Item,{name:"cliente_id",label:"Cliente",style:{display:pe?"none":"block"},rules:[{required:!pe,message:"Por favor informe o cliente"}],children:(0,L.jsx)(p.Z,{value:"",onChange:function(e){return be(e)},showSearch:!0,optionFilterProp:"children",children:W.map((function(e){return(0,L.jsx)(q,{value:e.value,children:e.label},e.value)}))})}),(0,L.jsx)(h.Z.Item,{children:se&&!pe&&(0,L.jsxs)("div",{className:"ant-row ant-form-item-row",children:[(0,L.jsx)("div",{className:"ant-col ant-form-item-label ant-col-xs-24 ant-col-sm-4"}),(0,L.jsx)("div",{className:"ant-col ant-form-item-control ant-col-xs-24 ant-col-sm-16",children:(0,L.jsx)("address",{className:"mt-2",style:{marginLeft:"5rem"},children:(0,L.jsxs)("p",{children:[(0,L.jsx)("span",{children:"".concat(se.endereco," ").concat(se.numero)}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"".concat(se.bairro," ").concat(se.cidade_estado)}),(0,L.jsx)("br",{}),(0,L.jsx)("span",{children:"".concat(se.telefone||"")})]})})})]})}),(0,L.jsx)(h.Z.Item,{name:"solicitante",label:"Solicitante",rules:[{required:!0,message:"Por favor insira um solicitante!",whitespace:!0},{max:100,message:"Solicitante deve conter no maximo 100 carateres"}],children:(0,L.jsx)(m.Z,{autoComplete:"off"})}),(0,L.jsx)(h.Z.Item,{name:"descricao",label:"Descricao",rules:[{required:!0,message:"Por favor insira uma descricao!",whitespace:!0}],children:(0,L.jsx)(U,{rows:4,value:""})}),(0,L.jsx)(h.Z.Item,{name:"tipo_ordem_servico_id",label:"Tipo",style:{display:pe?"none":"block"},children:(0,L.jsx)(p.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:I.$8.map((function(e){return(0,L.jsx)(q,{value:e.id,children:e.description},e.id)}))})}),(0,L.jsx)(h.Z.Item,{name:"status_ordem_servico_id",label:"Status",style:{display:pe?"none":"block"},children:(0,L.jsx)(p.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:I.K1.map((function(e){return(0,L.jsx)(q,{value:e.id,children:e.description},e.id)}))})}),(0,L.jsx)(h.Z.Item,{name:"usuario_id",label:"Tecnico",style:{display:pe?"none":"block"},children:(0,L.jsx)(p.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:Q.map((function(e){return(0,L.jsx)(q,{value:e.value,children:e.label},e.value)}))})}),(0,L.jsx)(h.Z.Item,{name:"solucao",label:"Solucao",style:{display:pe?"none":"block"},children:(0,L.jsx)(U,{rows:4,value:""})}),(0,L.jsx)(h.Z.Item,{name:"observacao",label:"Observacao",style:{display:pe?"none":"block"},children:(0,L.jsx)(U,{rows:4,value:""})}),(0,L.jsx)(h.Z.Item,{name:"consumo",label:"Consumo",style:{display:pe?"none":"block"},children:(0,L.jsx)(U,{rows:4,value:""})}),(0,L.jsx)(h.Z.Item,{name:"data",label:"Data Atendimento",style:{display:pe?"none":"block"},children:(0,L.jsx)(z,{showTime:!0,locale:S.Z,format:"DD/MM/YYYY HH:mm:ss"})}),(0,L.jsxs)(h.Z.Item,{name:"assinatura",label:"Assinatura",style:{display:pe?"none":"block"},children:[(0,L.jsx)("div",{style:{border:"2px dotted #999",borderRadius:"5px",height:"200px"},children:(0,L.jsx)(A(),{penColor:"#000",backgroundColor:"#fff",ref:a,clearOnResize:!1,onEnd:function(){n.setFieldValue("assinatura",a.current.toDataURL())},canvasProps:{className:T}})}),(0,L.jsx)(b.Z,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"0.5rem"},children:(0,L.jsx)(g.Z,{type:"default",onClick:function(){return a.current.clear()},children:"Limpar Assinatura"})})]}),(0,L.jsx)(h.Z.Item,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"1.8rem"},children:(0,L.jsx)(g.Z,{type:"primary",htmlType:"submit",style:{minWidth:"150px"},children:"Salvar"})})]})),(0,L.jsx)("div",{children:w&&w.created_at&&(0,L.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"83%",textAlign:"center",marginBottom:"1.5rem"},children:(0,L.jsxs)(g.Z,{type:"primary",onClick:function(){return re(!0)},children:[(0,L.jsx)(y.Z,{type:"printer"}),"Imprimir"]})})})]})]})},Y=function(e){(0,i.Z)(t,e);var n=(0,s.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){return(0,L.jsx)(W,{})}}]),t}(u.Component),H=Y},7095:function(e,n,t){t.d(n,{$8:function(){return m},CR:function(){return r},K1:function(){return u},KE:function(){return l},QR:function(){return o},VP:function(){return i},Yi:function(){return s},an:function(){return d},dA:function(){return a},rj:function(){return c}});var r={id:"deddf150-e3a0-4a09-8b54-671df2ba6824",description:"Triagem"},a={id:"cbe8b932-90ca-4a5b-84e4-3aa91571a0cb",description:"Aberto"},i={id:"5c1795fd-8856-4c44-85fd-f1488cb5489b",description:"Em Atendimento"},s={id:"1cdf403c-9da1-4a8e-b2fc-3e356d9815ff",description:"Fechado"},c={id:"administrador",description:"Administrador"},o={id:"tecnico",description:"Tecnico"},l={id:"cliente",description:"Cliente"},d=[c,o,l],u=[r,a,i,s,{id:"4a48df79-a466-4bd0-83b9-3c94b2b76d7f",description:"Cobran\xe7a"},{id:"1050ced4-0599-456d-a614-932ab25aed99",description:"Arquivado"}],m=[{id:"f6d1944a-7569-4668-bae6-c6fe4f36eb29",description:"Laborat\xf3rio"},{id:"9957342c-815e-47b4-8d16-62fe4432ee59",description:"Campo"}]}}]);
//# sourceMappingURL=84.7d06f92b.chunk.js.map