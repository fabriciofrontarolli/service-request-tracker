{"version":3,"file":"static/js/774.5e6c9491.chunk.js","mappings":"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","sources":["services/UsuarioService.js","services/utils.js","views/app-views/dashboards/perfil/index.js","../node_modules/antd/es/col/index.js","../node_modules/antd/es/row/index.js"],"sourcesContent":["import fetch from 'auth/FetchInterceptor'\nimport { normalizePayload } from './utils';\n\nconst UsuarioService = {}\n\nUsuarioService.fetch = function (page, limit) {\n\treturn fetch.get(`/usuarios?page=${page}&limit=${limit}`);\n}\n\nUsuarioService.get = function (id) {\n\tif (!id) { return undefined; }\n\treturn fetch.get(`/usuarios/${id}`);\n}\n\nUsuarioService.buscarTecnicos = function () {\n\treturn fetch.get(`/usuarios/tecnicos`);\n}\n\nUsuarioService.criar = function (data) {\n\tnormalizePayload(data);\n\treturn fetch({\n\t\turl: '/usuarios',\n\t\tmethod: 'post',\n\t\tdata: data\n\t})\n}\n\nUsuarioService.salvar = function (id, data) {\n\tnormalizePayload(data);\n\treturn fetch({\n\t\turl: `/usuarios/${id}`,\n\t\tmethod: 'put',\n\t\tdata: data\n\t})\n}\n\nUsuarioService.ativar = function (id) {\n\treturn fetch({\n\t\turl: `/usuarios/${id}/ativar`,\n\t\tmethod: 'put',\n\t})\n}\n\nUsuarioService.desativar = function (id) {\n\treturn fetch({\n\t\turl: `/usuarios/${id}/desativar`,\n\t\tmethod: 'put',\n\t})\n}\n\nexport default UsuarioService;\n","export const normalizePayload = (formData) => {\n  // remove null values from payload\n  Object.keys(formData).forEach(function(key) {\n    if (formData[key] === null || formData[key] === undefined || formData[key] === '') {\n        delete formData[key];\n    }\n  });\n};\n","import React, { useState, useEffect } from 'react';\nimport { Form, Button, Input, Row, Col, notification } from 'antd';\nimport UsuarioService from 'services/UsuarioService';\nimport { ROW_GUTTER } from 'constants/ThemeConstant';\nimport { useNavigate } from 'react-router-dom';\nimport { AUTH_USER } from 'constants/AuthConstant';\n\nexport const EditProfile = () => {\n  const [usuarioToUpdate, setusuarioToUpdate] = useState(undefined);\n  const [form] = Form.useForm();\n  const navigate = useNavigate();\n\n  const onFinish = async (values) => {\n    const novoNome = form.getFieldValue('nome');\n    const novoEmail = form.getFieldValue('email');\n    const novaSenha = form.getFieldValue('password');\n\n    let usuarioPayload = {\n      nome: novoNome,\n      email: novoEmail, \n    };\n\n    if (novaSenha) {\n      usuarioPayload.password = novaSenha;\n    }\n\n    try {\n      await UsuarioService.salvar(usuarioToUpdate.id, usuarioPayload);\n\n      const successMessage = `Usuario atualizado`;\n      notification.success({ message: successMessage });\n    }\n    catch (err) {\n      notification.error({\n        message: 'Erro ao atualizar o perfil'\n      });\n    }\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  const getUsuarioToUpdate = async (usuarioId) => {\n    try {\n      if (!!usuarioId) {\n        const response = await UsuarioService.get(usuarioId);\n        const usuario = response.data;\n        if (!!usuario) {\n          const allFields = Object.keys(usuario).map((field) => ({\n            name: field,\n            value: usuario[field]\n          }));\n          // remove id, created_at\n          const formFields = allFields.filter(field => (\n            field.name.toLowerCase() !== 'id' &&\n            field.name.toLowerCase() !== 'created_at'\n          ))\n\n          form.setFields(formFields);\n          setusuarioToUpdate(usuario);\n        }\n      }\n    }\n    catch(err) {\n      navigate('/app/administrativo/usuarios');\n      notification.error(`Erro ao buscar o Usuario! ${err}`);\n    }\n  }\n\n  const getLoggedInUser = () => {\n    const loggedInUserRaw = localStorage.getItem(AUTH_USER) || null;\n    if (!!loggedInUserRaw) {\n      const loggedInUser = JSON.parse(loggedInUserRaw);\n      getUsuarioToUpdate(loggedInUser.id);\n    }\n  }\n\n  useEffect(() => {\n\t\tgetLoggedInUser();\n\t}, []);\n\n  return (\n    <>\n      <div className=\"mt-4\">\n        <Form\n          form={form}\n          name=\"register\"\n          layout=\"vertical\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n        >\n          <Row>\n            <Col xs={24} sm={24} md={24} lg={16}>\n              <Row gutter={ROW_GUTTER}>\n                <Col xs={24} sm={24} md={12}>\n                  <Form.Item\n                    label=\"Name\"\n                    name=\"nome\"\n                    rules={[\n                      {\n                        required: true,\n                        message: 'Please input your name!',\n                      },\n                    ]}\n                  >\n                    <Input />\n                  </Form.Item>\n\n                  <Form.Item\n                    label=\"Email\"\n                    name=\"email\"\n                    rules={[{ \n                      required: true,\n                      type: 'email',\n                      message: 'Please enter a valid email!' \n                    }]}\n                  >\n                    <Input />\n                  </Form.Item>\n\n                  <Form.Item\n                    name=\"password\"\n                    label=\"Senha\"\n                    rules={[\n                      {\n                        required: true,\n                        message: 'Por favor insira a senha!',\n                      },\n                    ]}\n                    hasFeedback\n                  >\n                    <Input.Password />\n                  </Form.Item>\n\n                  <Form.Item\n                    name=\"password-repeat\"\n                    label=\"Confirme a Senha\"\n                    dependencies={['password']}\n                    hasFeedback\n                    rules={[\n                      {\n                        required: true,\n                        message: 'Por favor confirme a senha!',\n                      },\n                      ({ getFieldValue }) => ({\n                        validator(_, value) {\n                          if (!value || getFieldValue('password') === value) {\n                            return Promise.resolve();\n                          }\n                          return Promise.reject(new Error('As senhas devem ser iguais'));\n                        },\n                      }),\n                    ]}\n                  >\n                    <Input.Password />\n                  </Form.Item>\n                </Col>\n\n              </Row>\n              <Button type=\"primary\" htmlType=\"submit\">\n                Salvar\n              </Button>\n            </Col>\n          </Row>\n        </Form>\n      </div>\n    </>\n  )\n}\n\nexport default EditProfile\n","import { Col } from '../grid';\nexport default Col;","import { Row } from '../grid';\nexport default Row;"],"names":["UsuarioService","page","limit","fetch","id","data","normalizePayload","url","method","formData","Object","keys","forEach","key","undefined","EditProfile","useState","usuarioToUpdate","setusuarioToUpdate","Form","form","navigate","useNavigate","onFinish","values","novoNome","getFieldValue","novoEmail","novaSenha","usuarioPayload","nome","email","password","notification","message","getUsuarioToUpdate","usuarioId","response","usuario","allFields","map","field","name","value","formFields","filter","toLowerCase","setFields","useEffect","loggedInUserRaw","localStorage","getItem","AUTH_USER","loggedInUser","JSON","parse","getLoggedInUser","className","layout","onFinishFailed","errorInfo","console","log","xs","sm","md","lg","gutter","ROW_GUTTER","label","rules","required","type","hasFeedback","dependencies","validator","_","Promise","reject","Error","resolve","htmlType","Col","Row"],"sourceRoot":""}