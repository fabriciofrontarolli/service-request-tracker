"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[84],{5936:function(e,n,r){var t=r(613),a=r(1070),i={fetch:function(e,n){return t.Z.get("/clientes?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return t.Z.get("/clientes/".concat(e))},criar:function(e){return(0,a.Z)(e),(0,t.Z)({url:"/clientes",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,t.Z)({url:"/clientes/".concat(e),method:"put",data:n})}};n.Z=i},8429:function(e,n,r){var t=r(613),a=r(1070),i={fetch:function(e,n){return t.Z.get("/ordens-de-servico?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return t.Z.get("/ordens-de-servico/".concat(e))},quadroLaboratorio:function(){return t.Z.get("/ordens-de-servico/quadro-laboratorio")},quadroCampo:function(){return t.Z.get("/ordens-de-servico/quadro-campo")},criar:function(e){return(0,a.Z)(e),(0,t.Z)({url:"/ordens-de-servico",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,t.Z)({url:"/ordens-de-servico/".concat(e),method:"put",data:n})}};n.Z=i},4206:function(e,n,r){var t=r(613),a=r(1070),i={fetch:function(e,n){return t.Z.get("/usuarios?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return t.Z.get("/usuarios/".concat(e))},buscarTecnicos:function(){return t.Z.get("/usuarios/tecnicos")},criar:function(e){return(0,a.Z)(e),(0,t.Z)({url:"/usuarios",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,t.Z)({url:"/usuarios/".concat(e),method:"put",data:n})},ativar:function(e){return(0,t.Z)({url:"/usuarios/".concat(e,"/ativar"),method:"put"})},desativar:function(e){return(0,t.Z)({url:"/usuarios/".concat(e,"/desativar"),method:"put"})}};n.Z=i},1070:function(e,n,r){r.d(n,{Z:function(){return t}});var t=function(e){Object.keys(e).forEach((function(n){null!==e[n]&&void 0!==e[n]&&""!==e[n]||delete e[n]}))}},6599:function(e,n,r){r.r(n),r.d(n,{Register:function(){return V},default:function(){return W}});var t=r(5671),a=r(3144),i=r(136),s=r(9388),c=r(1413),o=r(4165),d=r(5861),l=r(9439),u=r(2791),m=r(940),f=r(7123),h=r(3734),p=r(1095),x=r(3085),j=r(6673),v=r(3373),Z=r(6106),g=r(3707),b=r(8803),y=r(7071),w=r(2426),S=r.n(w),_=r(5936),C=r(8429),k=r(7689),A=r(7095),N=r(1276),T=r.n(N),D="abrir-chamado_signaturePad__LxvjR",I=r(4206),E=r(1146),R=r.n(E),L=r(1087),O=r(184),P=function(e){var n=e.ordemDeServico,r=e.togglePrintView,t=(0,u.useRef)();return(0,O.jsxs)("div",{className:"container",children:[(0,O.jsx)(L.rU,{style:{fontSize:"1.6rem",marginBottom:"2rem"},onClick:r,children:"Voltar para OS"}),(0,O.jsxs)(j.Z,{style:{marginTop:"1.5rem"},children:[(0,O.jsxs)(j.Z,{ref:t,children:[(0,O.jsxs)("div",{className:"d-md-flex justify-content-md-between",style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,O.jsxs)("div",{className:"text-left",children:[(0,O.jsx)("img",{src:"/img/sathi-logo.png",alt:"",style:{marginBottom:"1rem"}}),(0,O.jsx)("address",{children:(0,O.jsxs)("p",{children:[(0,O.jsx)("span",{className:"font-weight-semibold text-dark font-size-md",children:"Sathi Informatica"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"00.439.616.0001-63"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"Rua Frei Manoel da Ressureicao, 339"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"Guanabara"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"Campinas/SP"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"13073-027"}),(0,O.jsx)("br",{}),(0,O.jsx)("abbr",{className:"text-dark",title:"Phone",children:"Telefone:"}),(0,O.jsx)("span",{children:"(19) 3705-1414"})]})})]}),(0,O.jsxs)("div",{className:"text-right",children:[(0,O.jsxs)("h2",{className:"mb-1 font-weight-semibold",children:["OS: ",n.numero]}),(0,O.jsx)("h5",{className:"mb-1 font-weight-semibold",children:n.tipo_ordem_servico}),(0,O.jsx)("p",{children:new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(n.created_at))}),(0,O.jsx)("br",{}),(0,O.jsx)("address",{children:(0,O.jsxs)("p",{children:[(0,O.jsx)("span",{className:"font-weight-semibold text-dark font-size-md",children:n.nome_fantasia}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:n.cliente_endereco}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:n.cliente_cidade_estado}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{children:"".concat(n.cliente_bairro," ").concat(n.cliente_cep," ")}),(0,O.jsx)("br",{})]})})]})]}),(0,O.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"2rem",marginBottom:"3rem",paddingBottom:"2rem",borderBottom:"1px solid #D8E2E7"},children:[(0,O.jsxs)("div",{children:[(0,O.jsx)("h5",{children:"ABERTURA"}),(0,O.jsx)("span",{children:"10/10/2023"})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("h5",{children:"CHEGADA"}),(0,O.jsx)("span",{children:"10/10/2023 - 10:25s"})]}),(0,O.jsxs)("div",{children:[(0,O.jsx)("h5",{children:"SAIDA"}),(0,O.jsx)("span",{children:"10/10/2023 - 14:35"})]})]}),(0,O.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,O.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"PROBLEMA"}),(0,O.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.descricao})]}),(0,O.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,O.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"SOLUCAO"}),(0,O.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.solucao})]}),(0,O.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,O.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"PENDENCIA"}),(0,O.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.consumo})]}),(0,O.jsxs)("div",{className:"mt-4",style:{marginTop:"2.5rem"},children:[(0,O.jsx)("h1",{style:{fontSize:"1.1rem",fontWeight:"300",letterSpacing:"0.3rem"},children:"OBSERVACOES"}),(0,O.jsx)("span",{style:{paddingLeft:"2rem",color:"#72849a"},children:n.observacao})]}),(0,O.jsx)("div",{className:"mt-2",children:(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[(0,O.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"300",letterSpacing:"0.3rem",marginTop:"2rem"},children:"ASSINATURA"}),(0,O.jsx)("div",{className:"text-right ",children:(0,O.jsx)("div",{className:"border-bottom",children:(0,O.jsx)("p",{className:"mb-2",children:(0,O.jsx)("img",{src:"".concat(n.assinatura),style:{width:"40rem"}})})})})]})})]}),(0,O.jsx)("hr",{className:"d-print-none"}),(0,O.jsx)("div",{className:"text-right d-print-none",children:(0,O.jsx)(R(),{trigger:function(){return(0,O.jsxs)(g.Z,{type:"primary",children:[(0,O.jsx)(b.Z,{type:"printer"}),(0,O.jsx)("span",{className:"ml-1",children:"Imprimir"})]})},content:function(){return t.current}})})]})]})},F=m.Z.TextArea,B=f.Z.RangePicker,z=h.Z.Option,q={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16}}},U=function(){var e=p.Z.useForm(),n=(0,l.Z)(e,1)[0],r=(0,k.s0)(),t=(0,u.useRef)(),a=(0,k.UO)(),i=(0,u.useState)(void 0),s=(0,l.Z)(i,2),f=s[0],w=s[1],N=(0,u.useState)([]),E=(0,l.Z)(N,2),R=E[0],L=E[1],U=(0,u.useState)([]),V=(0,l.Z)(U,2),W=V[0],Y=V[1],M=(0,u.useState)(!1),H=(0,l.Z)(M,2),K=H[0],G=H[1],$=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.Z.fetch(1,1e4);case 3:n=e.sent,r=n.data.map((function(e){return{value:e.id,label:"".concat(e.nome_fantasia," (").concat(e.contrato?"Contrato":"Eventual",")")}})),L(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err >> ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.Z.buscarTecnicos();case 3:n=e.sent,r=n.data.map((function(e){return{value:e.id,label:e.nome}})),Y(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("err >> ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(){var i,s,c,d,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a&&a.id,e.prev=1,!i){e.next=8;break}return e.next=5,C.Z.get(i);case 5:s=e.sent,(c=s.data)&&(d=Object.keys(c).map((function(e){return{name:e,value:c[e]}})),l=d.filter((function(e){return"id"!==e.name.toLowerCase()&&"created_at"!==e.name.toLowerCase()&&"data_inicio_atendimento"!==e.name.toLowerCase()&&"data_fim_atendimento"!==e.name.toLowerCase()})),c.data_inicio_atendimento&&c.data_fim_atendimento&&l.push({name:"data",value:[S()(c.data_inicio_atendimento),S()(c.data_fim_atendimento)]}),n.setFields(l),w(c),c.assinatura&&t.current.fromDataURL(c.assinatura));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),r("/app/dashboards/ordens-de-servico"),x.Z.error("Erro ao buscar o Ordem De Servico! ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,d.Z)((0,o.Z)().mark((function e(n){var t,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.data?n.data[0].toISOString():void 0,a=n.data?n.data[1].toISOString():void 0,n.data_inicio_atendimento=t,n.data_fim_atendimento=a,n.data=void 0,e.prev=5,!f){e.next=11;break}return e.next=9,C.Z.salvar(f.id,n);case 9:e.next=13;break;case 11:return e.next=13,C.Z.criar(n);case 13:i="Ordem de Servico ".concat(f?"atualizado":"criado"),x.Z.success({message:i}),r("/app/dashboards/ordens-de-servico"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),x.Z.error({message:e.t0});case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){$(),Q()}),[]),(0,u.useEffect)((function(){R.length&&J()}),[R]),K?(0,O.jsx)(P,{ordemDeServico:f,togglePrintView:function(){return G(!1)}}):(0,O.jsxs)(j.Z,{title:"Abrir Chamado",children:[f&&f.created_at&&(0,O.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"83%",textAlign:"center",marginBottom:"1.5rem"},children:(0,O.jsx)(v.Z,{title:"Data do chamado",style:{fontSize:"0.2rem"},value:new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric"}).format(new Date(f.created_at))})}),(0,O.jsxs)(p.Z,(0,c.Z)((0,c.Z)({},q),{},{form:n,name:"register",onFinish:X,scrollToFirstError:!0,children:[(0,O.jsx)(p.Z.Item,{name:"cliente_id",label:"Cliente",rules:[{required:!0,message:"Por favor informe o cliente"}],children:(0,O.jsx)(h.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:R.map((function(e){return(0,O.jsx)(z,{value:e.value,children:e.label},e.value)}))})}),(0,O.jsx)(p.Z.Item,{name:"solicitante",label:"Solicitante",rules:[{max:100,message:"Solicitante deve conter no maximo 100 carateres"}],children:(0,O.jsx)(m.Z,{autoComplete:"off"})}),(0,O.jsx)(p.Z.Item,{name:"descricao",label:"Descricao",rules:[{required:!0,message:"Por favor insira uma descricao!",whitespace:!0}],children:(0,O.jsx)(F,{rows:4,value:""})}),(0,O.jsx)(p.Z.Item,{name:"tipo_ordem_servico_id",label:"Tipo",children:(0,O.jsx)(h.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:A.$8.map((function(e){return(0,O.jsx)(z,{value:e.id,children:e.description},e.id)}))})}),(0,O.jsx)(p.Z.Item,{name:"status_ordem_servico_id",label:"Status",children:(0,O.jsx)(h.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:A.K1.map((function(e){return(0,O.jsx)(z,{value:e.id,children:e.description},e.id)}))})}),(0,O.jsx)(p.Z.Item,{name:"usuario_id",label:"Tecnico",children:(0,O.jsx)(h.Z,{value:"",onChange:function(){},showSearch:!0,optionFilterProp:"children",children:W.map((function(e){return(0,O.jsx)(z,{value:e.value,children:e.label},e.value)}))})}),(0,O.jsx)(p.Z.Item,{name:"solucao",label:"Solucao",children:(0,O.jsx)(F,{rows:4,value:""})}),(0,O.jsx)(p.Z.Item,{name:"observacao",label:"Observacao",children:(0,O.jsx)(F,{rows:4,value:""})}),(0,O.jsx)(p.Z.Item,{name:"consumo",label:"Consumo",children:(0,O.jsx)(F,{rows:4,value:""})}),(0,O.jsx)(p.Z.Item,{name:"data",label:"Data Atendimento",children:(0,O.jsx)(B,{showTime:!0,locale:y.Z,format:"DD/MM/YYYY HH:mm:ss"})}),(0,O.jsxs)(p.Z.Item,{name:"assinatura",label:"Assinatura",children:[(0,O.jsx)("div",{style:{border:"2px dotted #999",borderRadius:"5px",height:"200px"},children:(0,O.jsx)(T(),{penColor:"#000",backgroundColor:"#fff",ref:t,onEnd:function(){n.setFieldValue("assinatura",t.current.toDataURL())},canvasProps:{className:D}})}),(0,O.jsx)(Z.Z,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"0.5rem"},children:(0,O.jsx)(g.Z,{type:"default",onClick:function(){return t.current.clear()},children:"Limpar Assinatura"})})]}),(0,O.jsx)(p.Z.Item,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"1.8rem"},children:(0,O.jsx)(g.Z,{type:"primary",htmlType:"submit",style:{minWidth:"150px"},children:"Salvar"})})]})),(0,O.jsx)("div",{children:f&&f.created_at&&(0,O.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"83%",textAlign:"center",marginBottom:"1.5rem"},children:(0,O.jsxs)(g.Z,{type:"primary",onClick:function(){return G(!0)},children:[(0,O.jsx)(b.Z,{type:"printer"}),"Imprimir"]})})})]})},V=function(e){(0,i.Z)(r,e);var n=(0,s.Z)(r);function r(){return(0,t.Z)(this,r),n.apply(this,arguments)}return(0,a.Z)(r,[{key:"render",value:function(){return(0,O.jsx)(U,{})}}]),r}(u.Component),W=V},7095:function(e,n,r){r.d(n,{$8:function(){return u},K1:function(){return l},KE:function(){return o},QR:function(){return c},VP:function(){return a},Yi:function(){return i},an:function(){return d},dA:function(){return t},rj:function(){return s}});var t={id:"cbe8b932-90ca-4a5b-84e4-3aa91571a0cb",description:"Aberto"},a={id:"5c1795fd-8856-4c44-85fd-f1488cb5489b",description:"Em Atendimento"},i={id:"1cdf403c-9da1-4a8e-b2fc-3e356d9815ff",description:"Fechado"},s={id:"administrador",description:"Administrador"},c={id:"tecnico",description:"Tecnico"},o={id:"cliente",description:"Cliente"},d=[s,c,o],l=[{id:"deddf150-e3a0-4a09-8b54-671df2ba6824",description:"Triagem"},t,a,i,{id:"4a48df79-a466-4bd0-83b9-3c94b2b76d7f",description:"Cobran\xe7a"},{id:"1050ced4-0599-456d-a614-932ab25aed99",description:"Arquivado"}],u=[{id:"f6d1944a-7569-4668-bae6-c6fe4f36eb29",description:"Laborat\xf3rio"},{id:"9957342c-815e-47b4-8d16-62fe4432ee59",description:"Campo"}]}}]);
//# sourceMappingURL=84.ade20f90.chunk.js.map