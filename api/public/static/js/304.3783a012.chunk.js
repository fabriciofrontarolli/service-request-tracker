"use strict";(self.webpackChunkemilus=self.webpackChunkemilus||[]).push([[304],{5936:function(e,n,t){var r=t(613),a=t(1070),o={fetch:function(e,n){return r.Z.get("/clientes?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return r.Z.get("/clientes/".concat(e))},criar:function(e){return(0,a.Z)(e),(0,r.Z)({url:"/clientes",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,r.Z)({url:"/clientes/".concat(e),method:"put",data:n})}};n.Z=o},8429:function(e,n,t){var r=t(613),a=t(1070),o={fetch:function(e,n){return r.Z.get("/ordens-de-servico?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return r.Z.get("/ordens-de-servico/".concat(e))},quadroLaboratorio:function(){return r.Z.get("/ordens-de-servico/quadro-laboratorio")},quadroCampo:function(){return r.Z.get("/ordens-de-servico/quadro-campo")},criar:function(e){return(0,a.Z)(e),(0,r.Z)({url:"/ordens-de-servico",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,r.Z)({url:"/ordens-de-servico/".concat(e),method:"put",data:n})}};n.Z=o},4206:function(e,n,t){var r=t(613),a=t(1070),o={fetch:function(e,n){return r.Z.get("/usuarios?page=".concat(e,"&limit=").concat(n))},get:function(e){if(e)return r.Z.get("/usuarios/".concat(e))},buscarTecnicos:function(){return r.Z.get("/usuarios/tecnicos")},criar:function(e){return(0,a.Z)(e),(0,r.Z)({url:"/usuarios",method:"post",data:e})},salvar:function(e,n){return(0,a.Z)(n),(0,r.Z)({url:"/usuarios/".concat(e),method:"put",data:n})},ativar:function(e){return(0,r.Z)({url:"/usuarios/".concat(e,"/ativar"),method:"put"})},desativar:function(e){return(0,r.Z)({url:"/usuarios/".concat(e,"/desativar"),method:"put"})}};n.Z=o},1070:function(e,n,t){t.d(n,{Z:function(){return r}});var r=function(e){Object.keys(e).forEach((function(n){null!==e[n]&&void 0!==e[n]&&""!==e[n]||delete e[n]}))}},7095:function(e,n,t){t.d(n,{$8:function(){return d},K1:function(){return l},KE:function(){return s},QR:function(){return i},VP:function(){return a},Yi:function(){return o},an:function(){return u},dA:function(){return r},rj:function(){return c}});var r={id:"cbe8b932-90ca-4a5b-84e4-3aa91571a0cb",description:"Aberto"},a={id:"5c1795fd-8856-4c44-85fd-f1488cb5489b",description:"Em Atendimento"},o={id:"1cdf403c-9da1-4a8e-b2fc-3e356d9815ff",description:"Fechado"},c={id:"administrador",description:"Administrador"},i={id:"tecnico",description:"Tecnico"},s={id:"cliente",description:"Cliente"},u=[c,i,s],l=[{id:"deddf150-e3a0-4a09-8b54-671df2ba6824",description:"Triagem"},r,a,o,{id:"4a48df79-a466-4bd0-83b9-3c94b2b76d7f",description:"Cobran\xe7a"},{id:"1050ced4-0599-456d-a614-932ab25aed99",description:"Arquivado"}],d=[{id:"f6d1944a-7569-4668-bae6-c6fe4f36eb29",description:"Laborat\xf3rio"},{id:"9957342c-815e-47b4-8d16-62fe4432ee59",description:"Campo"}]},304:function(e,n,t){t.r(n),t.d(n,{Register:function(){return P}});var r=t(5671),a=t(3144),o=t(136),c=t(9388),i=t(1413),s=t(4165),u=t(5861),l=t(9439),d=t(2791),f=t(3734),p=t(1095),m=t(3085),v=t(940),Z=t(7528),b=t(3707),h=t(6673),x=t(5936),g=(t(8429),t(7689)),C=t(7095),j=t(4206),y=t(184),k=f.Z.Option,w={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16}}},E={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},O=function(){var e=p.Z.useForm(),n=(0,l.Z)(e,1)[0],t=(0,g.s0)(),r=(0,g.UO)(),a=(0,d.useState)(void 0),o=(0,l.Z)(a,2),c=o[0],h=o[1],O=(0,d.useState)([]),P=(0,l.Z)(O,2),S=(P[0],P[1]),F=(0,d.useState)([]),I=(0,l.Z)(F,2),N=I[0],_=I[1],q=(0,d.useState)(!1),A=(0,l.Z)(q,2),R=A[0],T=A[1],V=(0,d.useState)(!1),K=(0,l.Z)(V,2),L=K[0],U=K[1],$=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.Z.fetch(1,1e4);case 3:n=e.sent,t=n.data.map((function(e){return{value:e.id,label:e.nome_fantasia}})),S(n.data),_(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m.Z.error("Erro ao buscar cliente ".concat(e.t0)),console.log("erro >> ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(){var a,o,c,i,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r&&r.id,e.prev=1,!a){e.next=8;break}return e.next=5,j.Z.get(a);case 5:o=e.sent,(c=o.data)&&(i=Object.keys(c).map((function(e){return{name:e,value:c[e]}})),u=i.filter((function(e){return"id"!==e.name.toLowerCase()&&"created_at"!==e.name.toLowerCase()})),n.setFields(u),h(c));case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t("/app/administrativo/usuarios"),m.Z.error("Erro ao buscar o Usuario! ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,u.Z)((0,s.Z)().mark((function e(n){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete n["password-repeat"],n.is_admin=n.perfil===C.rj.id,n.is_tecnico=n.perfil===C.QR.id,n.is_cliente=n.perfil===C.KE.id,e.prev=4,!c){e.next=10;break}return e.next=8,j.Z.salvar(c.id,n);case 8:e.next=12;break;case 10:return e.next=12,j.Z.criar(n);case 12:r="Usuario ".concat(c?"atualizado":"criado"),m.Z.success({message:r}),t("/app/administrativo/usuarios"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),m.Z.error({message:e.t0});case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(n){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){$()}),[]),(0,d.useEffect)((function(){N.length&&Q()}),[N]),(0,y.jsxs)(p.Z,(0,i.Z)((0,i.Z)({},w),{},{form:n,name:"register",onFinish:Y,scrollToFirstError:!0,children:[(0,y.jsx)(p.Z.Item,{name:"nome",label:"Nome",rules:[{required:!0,message:"Por favor informe o nome"},{max:130,message:"Nome deve conter no maximo 130 carateres"}],children:(0,y.jsx)(v.Z,{autoComplete:"off"})}),(0,y.jsx)(p.Z.Item,{name:"email",label:"Email",rules:[{max:130,message:"Email deve conter no maximo 130 caracteres"}],children:(0,y.jsx)(v.Z,{autoComplete:"off"})}),(0,y.jsx)(p.Z.Item,{name:"perfil",label:"Perfil",children:(0,y.jsx)(f.Z,{onChange:function(){var e=!1;n.getFieldValue("perfil")===C.KE.id&&(e=!0),e||n.setFieldValue("id_cliente",void 0),T(e)},children:C.an.map((function(e){return(0,y.jsx)(k,{value:e.id,children:e.description},e.id)}))})}),R&&(0,y.jsx)(p.Z.Item,{name:"id_cliente",label:"Cliente",children:(0,y.jsx)(f.Z,{value:"",onChange:function(){},children:N.map((function(e){return(0,y.jsx)(k,{value:e.value,children:e.label},e.value)}))})}),(0,y.jsx)(p.Z.Item,{name:"password",label:"Senha",onChange:function(){var e=n.getFieldValue("password");U(!!e)},rules:[{required:!c,message:"Por favor insira a senha!"}],hasFeedback:!0,children:(0,y.jsx)(v.Z.Password,{})}),(0,y.jsx)(p.Z.Item,{name:"password-repeat",label:"Confirme a Senha",dependencies:["password"],hasFeedback:!0,rules:[{required:!c,message:"Por favor confirme a senha!"},function(e){var n=e.getFieldValue;return{validator:function(e,t){return t&&n("password")!==t?Promise.reject(new Error("As senhas devem ser iguais")):Promise.resolve()}}}],children:(0,y.jsx)(v.Z.Password,{})}),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[c&&L&&(0,y.jsxs)(Z.Z,{color:"volcano",style:{textAlign:"center",marginBottom:"2rem"},children:["Atencao: O usuario sera salvo com uma nova senha. ",(0,y.jsx)("br",{})," o usuario devera ser notificado!"]}),(0,y.jsx)(b.Z,{type:"primary",htmlType:"submit",children:"Salvar"})]}),(0,y.jsx)(p.Z.Item,(0,i.Z)({},E))]}))},P=function(e){(0,o.Z)(t,e);var n=(0,c.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,a.Z)(t,[{key:"render",value:function(){return(0,y.jsx)(h.Z,{title:"Novo Usuario",children:(0,y.jsx)(O,{})})}}]),t}(d.Component);n.default=P},7528:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(4942),a=t(7462),o=t(9439),c=t(732),i=t(1694),s=t.n(i),u=t(1818),l=t(2791),d=t(1929),f=t(4466),p=t(2833),m=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},v=function(e){var n,t=e.prefixCls,o=e.className,c=e.checked,i=e.onChange,u=e.onClick,f=m(e,["prefixCls","className","checked","onChange","onClick"]),p=(0,l.useContext(d.E_).getPrefixCls)("tag",t),v=s()(p,(n={},(0,r.Z)(n,"".concat(p,"-checkable"),!0),(0,r.Z)(n,"".concat(p,"-checkable-checked"),c),n),o);return l.createElement("span",(0,a.Z)({},f,{className:v,onClick:function(e){null===i||void 0===i||i(!c),null===u||void 0===u||u(e)}}))},Z=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},b=new RegExp("^(".concat(f.Y.join("|"),")(-inverse)?$")),h=new RegExp("^(".concat(f.E.join("|"),")$")),x=function(e,n){var t,i=e.prefixCls,f=e.className,m=e.style,v=e.children,x=e.icon,g=e.color,C=e.onClose,j=e.closeIcon,y=e.closable,k=void 0!==y&&y,w=Z(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),E=l.useContext(d.E_),O=E.getPrefixCls,P=E.direction,S=l.useState(!0),F=(0,o.Z)(S,2),I=F[0],N=F[1];l.useEffect((function(){"visible"in w&&N(w.visible)}),[w.visible]);var _=function(){return!!g&&(b.test(g)||h.test(g))},q=(0,a.Z)({backgroundColor:g&&!_()?g:void 0},m),A=_(),R=O("tag",i),T=s()(R,(t={},(0,r.Z)(t,"".concat(R,"-").concat(g),A),(0,r.Z)(t,"".concat(R,"-has-color"),g&&!A),(0,r.Z)(t,"".concat(R,"-hidden"),!I),(0,r.Z)(t,"".concat(R,"-rtl"),"rtl"===P),t),f),V=function(e){e.stopPropagation(),null===C||void 0===C||C(e),e.defaultPrevented||"visible"in w||N(!1)},K="onClick"in w||v&&"a"===v.type,L=(0,u.Z)(w,["visible"]),U=x||null,$=U?l.createElement(l.Fragment,null,U,l.createElement("span",null,v)):v,Q=l.createElement("span",(0,a.Z)({},L,{ref:n,className:T,style:q}),$,k?j?l.createElement("span",{className:"".concat(R,"-close-icon"),onClick:V},j):l.createElement(c.Z,{className:"".concat(R,"-close-icon"),onClick:V}):null);return K?l.createElement(p.Z,null,Q):Q},g=l.forwardRef(x);g.CheckableTag=v;var C=g}}]);
//# sourceMappingURL=304.3783a012.chunk.js.map